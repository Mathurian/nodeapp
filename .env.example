# ======================================================================
# EVENT MANAGER - ENVIRONMENT CONFIGURATION
# ======================================================================
# Complete configuration template for Event Manager application
# Copy this file to .env and customize for your environment
# ======================================================================

# ----------------------------------------------------------------------
# ENVIRONMENT & APPLICATION
# ----------------------------------------------------------------------

# Application environment: development, staging, production
NODE_ENV=production

# Application port (default: 3000)
PORT=3000

# Application URLs
APP_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3001
API_URL=http://localhost:3000

# Application name and version
APP_NAME="Event Manager"
APP_VERSION=2.0.0

# ----------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------

# PostgreSQL connection string with optimized pooling
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?options
# Connection pool options:
#   - connection_limit: Max connections per pool (10-20 recommended)
#   - pool_timeout: Connection timeout in seconds
#   - connect_timeout: Initial connection timeout in seconds
DATABASE_URL="postgresql://event_manager:your_password@localhost:5432/event_manager?schema=public&connection_limit=10&pool_timeout=10&connect_timeout=5"

# Optional: Separate read replica for read queries
# DATABASE_READ_URL="postgresql://event_manager:password@read-replica:5432/event_manager"

# Database migration settings
DATABASE_MIGRATE_ON_START=false
DATABASE_SEED_ON_INIT=false

# ----------------------------------------------------------------------
# REDIS CONFIGURATION (Optional but recommended)
# ----------------------------------------------------------------------

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Enable/disable Redis caching
REDIS_ENABLE=true

# Fallback to in-memory cache if Redis unavailable
REDIS_FALLBACK_TO_MEMORY=true

# Redis password (if required)
# REDIS_PASSWORD=your_redis_password

# Redis database number (0-15)
# REDIS_DB=0

# Redis connection pool size
# REDIS_MAX_CONNECTIONS=10

# ----------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# ----------------------------------------------------------------------

# JWT (JSON Web Token) Configuration
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_THIS_TO_A_RANDOM_64_CHARACTER_STRING
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Session Configuration
# Generate with: openssl rand -base64 64
SESSION_SECRET=CHANGE_THIS_TO_A_RANDOM_64_CHARACTER_STRING
SESSION_TIMEOUT=1800000
SESSION_VERSION=1

# CSRF Protection
# Generate with: openssl rand -base64 32
CSRF_SECRET=CHANGE_THIS_TO_A_RANDOM_32_CHARACTER_STRING
CSRF_ENABLED=true

# Password Hashing (bcrypt rounds: 10-14 recommended)
BCRYPT_ROUNDS=12

# Multi-Factor Authentication (MFA)
MFA_ENABLED=true
MFA_ISSUER="Event Manager"
MFA_WINDOW=1
MFA_BACKUP_CODES_COUNT=10

# Account Security
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=900000
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_EXPIRY_DAYS=90

# ----------------------------------------------------------------------
# RATE LIMITING & SECURITY
# ----------------------------------------------------------------------

# Rate limiting configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Strict rate limiting for auth endpoints
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# API rate limiting per user
API_RATE_LIMIT_PER_USER=1000

# CORS Configuration (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Security Headers (Helmet.js)
HELMET_ENABLED=true
HELMET_CSP_ENABLED=true

# XSS Protection
XSS_PROTECTION=true

# ----------------------------------------------------------------------
# FILE UPLOAD & VIRUS SCANNING
# ----------------------------------------------------------------------

# File upload directory
UPLOAD_DIR=uploads

# Max file size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated MIME types)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/csv,application/vnd.ms-excel

# Virus scanning with ClamAV
CLAMAV_ENABLED=true
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# Optional: Unix socket path (Linux/macOS)
# CLAMAV_SOCKET=/var/run/clamav/clamd.ctl

# Behavior when ClamAV unavailable: 'allow' or 'reject'
CLAMAV_FALLBACK_BEHAVIOR=allow
CLAMAV_TIMEOUT=60000
CLAMAV_MAX_FILE_SIZE=52428800

# File encryption
FILE_ENCRYPTION_ENABLED=false
# FILE_ENCRYPTION_KEY=your_encryption_key

# ----------------------------------------------------------------------
# EMAIL CONFIGURATION (SMTP)
# ----------------------------------------------------------------------

# SMTP Server Settings
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@example.com
SMTP_PASS=your_smtp_password
SMTP_FROM=noreply@example.com
SMTP_FROM_NAME="Event Manager"

# Email rate limiting
EMAIL_RATE_LIMIT=100

# Email templates
EMAIL_TEMPLATE_DIR=src/templates/email

# ----------------------------------------------------------------------
# LOGGING & MONITORING
# ----------------------------------------------------------------------

# Log level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# Log file paths
LOG_FILE=logs/event-manager.log
LOG_ERROR_FILE=logs/error.log
LOG_COMBINED_FILE=logs/combined.log

# Log rotation
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14
LOG_DATE_PATTERN=YYYY-MM-DD

# Database query logging
LOG_DATABASE_QUERIES=false
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD_MS=1000

# Performance monitoring
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Application Performance Monitoring (APM)
# APM_ENABLED=false
# APM_SERVICE_NAME="Event Manager"
# APM_SERVER_URL=http://localhost:8200

# ----------------------------------------------------------------------
# REAL-TIME FEATURES (Socket.IO)
# ----------------------------------------------------------------------

# WebSocket configuration
SOCKET_ENABLED=true
SOCKET_PORT=3000
SOCKET_PATH=/socket.io
SOCKET_ORIGINS=http://localhost:3000,http://localhost:3001

# WebSocket connection limits
SOCKET_MAX_CONNECTIONS=1000
SOCKET_PING_TIMEOUT=5000
SOCKET_PING_INTERVAL=25000

# ----------------------------------------------------------------------
# BACKGROUND JOBS (BullMQ)
# ----------------------------------------------------------------------

# Job queue configuration
BULL_ENABLED=true
BULL_REDIS_URL=redis://localhost:6379
BULL_PREFIX=event-manager

# Job concurrency
JOB_CONCURRENCY_EMAIL=5
JOB_CONCURRENCY_REPORT=3
JOB_CONCURRENCY_BACKUP=1

# Job retention
JOB_RETAIN_COMPLETED=100
JOB_RETAIN_FAILED=500

# ----------------------------------------------------------------------
# MULTI-TENANCY
# ----------------------------------------------------------------------

# Multi-tenant mode
MULTI_TENANT_ENABLED=false

# Tenant identification method: subdomain, domain, header
TENANT_ID_METHOD=subdomain

# Default tenant
DEFAULT_TENANT=default

# Tenant database isolation: schema, database
TENANT_ISOLATION_METHOD=schema

# ----------------------------------------------------------------------
# WORKFLOW MANAGEMENT
# ----------------------------------------------------------------------

# Workflow engine
WORKFLOW_ENABLED=true

# Max workflow steps
WORKFLOW_MAX_STEPS=20

# Workflow timeout (hours)
WORKFLOW_DEFAULT_TIMEOUT=168

# ----------------------------------------------------------------------
# CUSTOM FIELDS
# ----------------------------------------------------------------------

# Custom fields feature
CUSTOM_FIELDS_ENABLED=true

# Max custom fields per entity
CUSTOM_FIELDS_MAX_PER_ENTITY=50

# ----------------------------------------------------------------------
# EVENT LOGS & AUDIT TRAIL
# ----------------------------------------------------------------------

# Event logging
EVENT_LOG_ENABLED=true

# Event log retention (days)
EVENT_LOG_RETENTION_DAYS=365

# Audit trail detail level: minimal, standard, detailed
AUDIT_TRAIL_LEVEL=standard

# Log all database queries
AUDIT_LOG_DB_QUERIES=false

# ----------------------------------------------------------------------
# DISASTER RECOVERY & BACKUPS
# ----------------------------------------------------------------------

# Disaster Recovery enabled
DR_ENABLED=true

# Recovery Time Objective (hours)
DR_RTO=4

# Recovery Point Objective (hours)
DR_RPO=1

# Backup configuration
BACKUP_ENABLED=true
BACKUP_DIR=backups
BACKUP_RETENTION_DAYS=30

# Backup encryption
BACKUP_ENCRYPTION_ENABLED=false
# BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# Automated backup schedule (cron format)
BACKUP_SCHEDULE_FULL="0 2 * * *"
BACKUP_SCHEDULE_INCREMENTAL="0 * * * *"

# S3 backup configuration (optional)
# BACKUP_S3_ENABLED=false
# BACKUP_S3_BUCKET=event-manager-backups
# BACKUP_S3_REGION=us-east-1
# BACKUP_S3_ACCESS_KEY_ID=your_access_key
# BACKUP_S3_SECRET_ACCESS_KEY=your_secret_key

# Azure backup configuration (optional)
# BACKUP_AZURE_ENABLED=false
# BACKUP_AZURE_ACCOUNT_NAME=your_account
# BACKUP_AZURE_ACCOUNT_KEY=your_key
# BACKUP_AZURE_CONTAINER=backups

# GCP backup configuration (optional)
# BACKUP_GCP_ENABLED=false
# BACKUP_GCP_PROJECT_ID=your_project
# BACKUP_GCP_BUCKET=event-manager-backups
# BACKUP_GCP_KEY_FILE=/path/to/service-account-key.json

# ----------------------------------------------------------------------
# CACHING STRATEGY
# ----------------------------------------------------------------------

# Cache configuration
CACHE_ENABLED=true
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SHORT=300
CACHE_TTL_LONG=86400

# Cache invalidation strategy
CACHE_INVALIDATION=event-driven

# Cache prefixes
CACHE_PREFIX_USER=user:
CACHE_PREFIX_EVENT=event:
CACHE_PREFIX_SCORE=score:

# ----------------------------------------------------------------------
# PROGRESSIVE WEB APP (PWA)
# ----------------------------------------------------------------------

# PWA features
PWA_ENABLED=true

# Service worker caching
SW_CACHE_NAME=event-manager-v1
SW_CACHE_STATIC=true
SW_CACHE_RUNTIME=true

# Offline support
OFFLINE_ENABLED=true

# Background sync
BACKGROUND_SYNC_ENABLED=true

# Push notifications
PUSH_NOTIFICATIONS_ENABLED=true
# VAPID_PUBLIC_KEY=your_public_key
# VAPID_PRIVATE_KEY=your_private_key
# VAPID_SUBJECT=mailto:admin@example.com

# ----------------------------------------------------------------------
# ACCESSIBILITY & UI
# ----------------------------------------------------------------------

# WCAG compliance level
WCAG_LEVEL=AA

# High contrast mode
HIGH_CONTRAST_MODE=true

# Reduced motion
RESPECT_REDUCED_MOTION=true

# Language/Locale
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-ES,fr-FR

# Timezone
DEFAULT_TIMEZONE=UTC

# ----------------------------------------------------------------------
# PERFORMANCE OPTIMIZATION
# ----------------------------------------------------------------------

# Database connection pooling
DB_POOL_MIN=2
DB_POOL_MAX=10

# Query result caching
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=600

# API response compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Static asset caching (seconds)
STATIC_CACHE_MAX_AGE=31536000

# ----------------------------------------------------------------------
# DEVELOPMENT & DEBUGGING
# ----------------------------------------------------------------------

# Development mode features
DEV_MODE=false

# Hot reload
HOT_RELOAD=false

# Debug logging
DEBUG=false
DEBUG_NAMESPACE=event-manager:*

# Source maps
SOURCE_MAPS=true

# SQL query logging
LOG_SQL_QUERIES=false

# Pretty print logs
LOG_PRETTY_PRINT=false

# ----------------------------------------------------------------------
# EXTERNAL INTEGRATIONS
# ----------------------------------------------------------------------

# Slack notifications (optional)
# SLACK_ENABLED=false
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Microsoft Teams notifications (optional)
# TEAMS_ENABLED=false
# TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/WEBHOOK/URL

# Zapier integration (optional)
# ZAPIER_ENABLED=false
# ZAPIER_WEBHOOK_URL=https://hooks.zapier.com/hooks/catch/YOUR/WEBHOOK/

# ----------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------

# Enable/disable specific features
FEATURE_MFA=true
FEATURE_WORKFLOWS=true
FEATURE_CUSTOM_FIELDS=true
FEATURE_EVENT_LOGS=true
FEATURE_MULTI_TENANCY=false
FEATURE_DR_MANAGEMENT=true
FEATURE_BULK_OPERATIONS=true
FEATURE_ADVANCED_SEARCH=true
FEATURE_PWA=true
FEATURE_NOTIFICATIONS=true
FEATURE_REAL_TIME=true

# ----------------------------------------------------------------------
# TESTING & QA
# ----------------------------------------------------------------------

# Test environment
TEST_MODE=false

# Test database
# TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/event_manager_test

# Mock external services
MOCK_EXTERNAL_SERVICES=false

# E2E test configuration
# E2E_BASE_URL=http://localhost:3001
# E2E_HEADLESS=true

# ----------------------------------------------------------------------
# ADVANCED CONFIGURATION
# ----------------------------------------------------------------------

# Maximum payload size (in bytes)
MAX_PAYLOAD_SIZE=52428800

# Request timeout (milliseconds)
REQUEST_TIMEOUT=30000

# Graceful shutdown timeout
SHUTDOWN_TIMEOUT=10000

# Worker threads
WORKER_THREADS=4

# Memory limits
NODE_OPTIONS="--max-old-space-size=4096"

# ----------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------
# 1. Generate secure secrets with: openssl rand -base64 64
# 2. Never commit .env file to version control
# 3. Use different secrets for development and production
# 4. Rotate secrets regularly (quarterly recommended)
# 5. See documentation for detailed configuration guide
# ======================================================================

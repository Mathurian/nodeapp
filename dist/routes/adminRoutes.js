"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const adminController_1 = require("../controllers/adminController");
const settingsController_1 = require("../controllers/settingsController");
const auth_1 = require("../middleware/auth");
const errorHandler_1 = require("../middleware/errorHandler");
const router = express_1.default.Router();
router.use(auth_1.authenticateToken);
router.get("/database/tables", (0, auth_1.requireRole)(["ADMIN"]), adminController_1.getDatabaseTables);
router.post("/database/query", (0, auth_1.requireRole)(["ADMIN"]), (0, errorHandler_1.logActivity)("EXECUTE_DATABASE_QUERY", "DATABASE"), adminController_1.executeDatabaseQuery);
router.use((0, auth_1.requireRole)(['ADMIN', 'ORGANIZER', 'BOARD']));
router.get('/stats', adminController_1.getStats);
router.get('/logs', adminController_1.getLogs);
router.get('/active-users', adminController_1.getActiveUsers);
router.get('/users', adminController_1.getUsers);
router.get('/events', adminController_1.getEvents);
router.get('/contests', adminController_1.getContests);
router.get('/categories', adminController_1.getCategories);
router.get('/scores', adminController_1.getScores);
router.get('/audit-logs', adminController_1.getAuditLogs);
router.post('/export-audit-logs', adminController_1.exportAuditLogs);
router.post('/test/:type', adminController_1.testConnection);
router.post('/users/force-logout-all', (0, errorHandler_1.logActivity)('FORCE_LOGOUT_ALL', 'USER'), adminController_1.forceLogoutAllUsers);
router.post('/users/:id/force-logout', (0, errorHandler_1.logActivity)('FORCE_LOGOUT_USER', 'USER'), adminController_1.forceLogoutUser);
router.get('/contestant/:contestantId/scores', adminController_1.getContestantScores);
router.get('/settings', settingsController_1.getSettings);
router.put('/settings', settingsController_1.updateSettings);
router.get('/settings/logging', settingsController_1.getLoggingLevels);
router.put('/settings/logging', settingsController_1.updateLoggingLevel);
router.get('/settings/security', settingsController_1.getSecuritySettings);
router.put('/settings/security', settingsController_1.updateSecuritySettings);
router.get('/settings/backup', settingsController_1.getBackupSettings);
router.put('/settings/backup', settingsController_1.updateBackupSettings);
router.get('/settings/email', settingsController_1.getEmailSettings);
router.put('/settings/email', settingsController_1.updateEmailSettings);
router.get('/password-policy', settingsController_1.getPasswordPolicy);
router.put('/password-policy', settingsController_1.updatePasswordPolicy);
router.get('/database/tables/:tableName/structure', (0, auth_1.requireRole)(['ADMIN']), adminController_1.getTableStructure);
router.get('/database/tables/:tableName/data', (0, auth_1.requireRole)(['ADMIN']), adminController_1.getTableData);
exports.default = router;
module.exports = router;
//# sourceMappingURL=adminRoutes.js.map